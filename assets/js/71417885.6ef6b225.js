(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5773],{64223:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>T,contentTitle:()=>A,default:()=>S,frontMatter:()=>E,metadata:()=>C,toc:()=>x});var n=a(87462),o=a(67294),l=a(3905),i=a(91262),s=a(41402),r=a.n(s),d=a(35790),c=a(46605),m=a(41426),u=a(23660),p=a(76798);var k=a(82169);const h=(0,p.CY)("demo",{demo:"demo_Zn5S",demo__container:"demo__container_XKdI",demo__detail:"demo__detail_XQyo",demo__ddo:"demo__ddo_uikf",demo__buy:"demo__buy_dGjE"}),g=()=>{const{sdk:e,isLoadingSDK:t}=m.Catalog.useNevermined();return o.createElement(o.Fragment,null,o.createElement(p.AH,null,o.createElement(p.II,{className:h("detail"),variants:["bold"]},"Is Loading SDK:"),o.createElement(p.II,{className:h("detail")},t?"Yes":"No")),o.createElement(p.AH,null,o.createElement(p.II,{variants:["bold"],className:h("detail")},"Is SDK Avaialable:"),o.createElement(p.II,{className:h("detail")},e&&Object.keys(e).length>0?"Yes":"No")))},w=e=>{let{ddo:t}=e;return o.createElement(o.Fragment,null,o.createElement(p.AH,null,o.createElement(p.II,{className:h("detail"),variants:["bold"]},"Asset ",t.id.slice(0,10),"...:")),o.createElement(p.II,{className:h("ddo"),variants:["detail"]},JSON.stringify(t)))},b=e=>{let{onPublish:t}=e;const{assets:a}=m.Catalog.useNevermined();return o.createElement(o.Fragment,null,o.createElement(p.wg,{type:"secondary",onClick:t,disabled:!Object.keys(a).length},"mint"))},y=e=>{let{ddo:t}=e;const{assets:a,account:n,isLoadingSDK:l,subscription:i,sdk:s}=m.Catalog.useNevermined(),{walletAddress:r}=u.MetaMask.useWallet(),[d,c]=(0,o.useState)(!1),[k,g]=(0,o.useState)(!1),[w,b]=(0,o.useState)("");(0,o.useEffect)((()=>{(async()=>{c(await n.isNFT1155Holder(t.id,r)),b(await s.assets.owner(t.id))})()}),[r,k]);return o.createElement(p.AH,{className:h("buy")},d?o.createElement(p.wg,{type:"secondary",onClick:async()=>{console.log(t.id),await a.downloadNFT(t.id)},disabled:l},"Download NFT"):w!==r?o.createElement(p.wg,{type:"secondary",onClick:async()=>{n.isTokenValid()||await n.generateToken();const e=await(0,m.getCurrentAccount)(s),a=await i.buySubscription(t.id,e,w,1,1155);g(Boolean(a))},disabled:l},"buy"):o.createElement("span",null,"The owner cannot buy, please change the account to buy the NFT asset"))},N=()=>{const{loginMetamask:e,walletAddress:t}=u.MetaMask.useWallet();return o.createElement(p.AH,null,o.createElement(p.II,{variants:["bold"],className:h("detail")},"Wallet address:"),o.createElement(p.II,null,t),!t&&o.createElement(p.wg,{type:"secondary",onClick:e},"Connect To MM"))},v=e=>{let{gatewayAddress:t}=e;const{isLoadingSDK:a,sdk:n,account:l}=m.Catalog.useNevermined(),{publishNFT1155:i}=m.AssetService.useAssetPublish(),{walletAddress:s}=u.MetaMask.useWallet(),[p,k]=(0,o.useState)({});d.Logger.setLevel(3);const v={main:{name:"",files:[{index:0,contentType:"application/json",url:"https://github.com/nevermined-io/docs/blob/master/docs/architecture/specs/metadata/examples/ddo-example.json"}],type:"dataset",author:"",license:"",dateCreated:(new Date).toISOString(),price:""}};return o.createElement("div",{className:h("container")},o.createElement(g,null),o.createElement(N,null),s&&!p.id&&o.createElement(b,{onPublish:async()=>{try{const e=await(0,m.getCurrentAccount)(n),a=((e,t,a)=>{const n=new Map;let o=[];1===e.length&&0===e[0].split&&(o=[{name:a,split:100,walletAddress:a}]);let l=0;if(o.forEach((e=>{if(e.split&&e.split>0){const a=(t*e.split/100).toFixed();n.set(e.walletAddress,c.default.from(+a)),l+=e.split}})),!n.has(a)){const e=+(t*(100-l)/100).toFixed();n.set(a,c.default.from(e))}return n})([],100,e.getId()),o=new(r())(a),s={royaltyKind:m.RoyaltyKind.Standard,scheme:(0,m.getRoyaltyScheme)(n,m.RoyaltyKind.Standard),amount:0};l.isTokenValid()||await l.generateToken();const d=await i({gatewayAddress:t,assetRewards:o,metadata:v,nftAmount:1,preMint:!0,cap:100,royaltyAttributes:s,erc20TokenAddress:"0x2058A9D7613eEE744279e3856Ef0eAda5FCbaA7e"});k(d)}catch(e){console.log("error",e)}}}),!a&&(null==p?void 0:p.id)&&o.createElement(o.Fragment,null,o.createElement(w,{ddo:p}),o.createElement(y,{ddo:p})))},f=()=>{const e={web3Provider:"undefined"!=typeof window?window.ethereum:new k.r,gatewayUri:"https://defi.v2.gateway.mumbai.nevermined.rocks",faucetUri:"https://faucet.rinkeby.nevermined.rocks",verbose:!0,gatewayAddress:"0x5838B5512cF9f12FE9f2beccB20eb47211F9B0bc",graphHttpUri:"https://api.thegraph.com/subgraphs/name/nevermined-io/common",marketplaceAuthToken:m.AuthToken.fetchMarketplaceApiTokenFromLocalStorage().token,marketplaceUri:"https://defi.v2.marketplace-api.mumbai.nevermined.rocks",artifactsFolder:`${location.protocol}//${location.host}/contracts`};return o.createElement(m.Catalog.NeverminedProvider,{config:e,verbose:!0},o.createElement(m.AssetService.AssetPublishProvider,null,o.createElement(u.MetaMask.WalletProvider,{correctNetworkId:"0x13881",nodeUri:""},o.createElement(v,{gatewayAddress:e.gatewayAddress}))))},E={sidebar_position:4},A="Demo",C={unversionedId:"catalog/demo",id:"catalog/demo",title:"Demo",description:"This demo is based in the code of the Example section",source:"@site/docs/catalog/demo.md",sourceDirName:"catalog",slug:"/catalog/demo",permalink:"/docs/catalog/demo",draft:!1,editUrl:"https://github.com/nevermined-io/docs/tree/main/docs/catalog/demo.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Example",permalink:"/docs/catalog/example"},next:{title:"Getting started",permalink:"/docs/catalog/core/"}},T={},x=[{value:"Workflow example",id:"workflow-example",level:2},{value:"View",id:"view",level:2}],I={toc:x};function S(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},I,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"demo"},"Demo"),(0,l.kt)("p",null,"This demo is based in the code of the ",(0,l.kt)("a",{parentName:"p",href:"/docs/catalog/example"},"Example")," section"),(0,l.kt)("h2",{id:"workflow-example"},"Workflow example"),(0,l.kt)("p",null,"The example included in the template covers the most used functionalities to work with NFT1155."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Requirements:")," The accounts wallet used for the example need to have ",(0,l.kt)("inlineCode",{parentName:"p"},"Matic")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"USDC")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Connect the wallet"),(0,l.kt)("li",{parentName:"ol"},"Click ",(0,l.kt)("inlineCode",{parentName:"li"},"Mint")," button and approve transactions and sign authorization in the wallet."),(0,l.kt)("li",{parentName:"ol"},"As an owner once the token is minted the ",(0,l.kt)("inlineCode",{parentName:"li"},"Mint")," button will change to ",(0,l.kt)("inlineCode",{parentName:"li"},"Download NFT"),"."),(0,l.kt)("li",{parentName:"ol"},"Click in ",(0,l.kt)("inlineCode",{parentName:"li"},"Download NFT")," to get the example asset (in this case is a JSON file example)"),(0,l.kt)("li",{parentName:"ol"},"Change the account in the wallet"),(0,l.kt)("li",{parentName:"ol"},"Click in ",(0,l.kt)("inlineCode",{parentName:"li"},"Buy")," button and approve transactions and sign authorization in the wallet"),(0,l.kt)("li",{parentName:"ol"},"As a buyer once the token is bought the ",(0,l.kt)("inlineCode",{parentName:"li"},"Buy")," button will change to ",(0,l.kt)("inlineCode",{parentName:"li"},"Download NFT")),(0,l.kt)("li",{parentName:"ol"},"Repeat the step 4")),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Warning:")," The data is not persistent, once that the browser is reloaded the workflow example starts\nfrom the beginning again"),(0,l.kt)("h2",{id:"view"},"View"),(0,l.kt)(i.Z,{fallback:(0,l.kt)("div",null,"Loading demo..."),mdxType:"BrowserOnly"},(()=>(0,l.kt)(f,{mdxType:"Demo"}))))}S.isMDXComponent=!0},88677:()=>{},62808:()=>{},9114:()=>{},74487:()=>{},46601:()=>{},89214:()=>{},71922:()=>{},2363:()=>{},96419:()=>{},56353:()=>{},69386:()=>{},31616:()=>{},69862:()=>{},40964:()=>{}}]);