"use strict";(self.webpackChunknvm_docs=self.webpackChunknvm_docs||[]).push([[8925],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=l(n),u=a,f=m["".concat(s,".").concat(u)]||m[u]||p[u]||o;return n?r.createElement(f,c(c({ref:t},d),{},{components:n})):r.createElement(f,c({ref:t},d))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var l=2;l<o;l++)c[l]=n[l];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5701:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return p}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),c=["components"],i={},s=void 0,l={unversionedId:"architecture/components/contracts/contracts/templates/AccessTemplate",id:"architecture/components/contracts/contracts/templates/AccessTemplate",title:"AccessTemplate",description:"Implementation of Access Agreement Template",source:"@site/docs/architecture/components/contracts/contracts/templates/AccessTemplate.md",sourceDirName:"architecture/components/contracts/contracts/templates",slug:"/architecture/components/contracts/contracts/templates/AccessTemplate",permalink:"/docs/architecture/components/contracts/contracts/templates/AccessTemplate",draft:!1,editUrl:"https://github.com/nevermined-io/nvm-docs/tree/main/docs/architecture/components/contracts/contracts/templates/AccessTemplate.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"AccessProofTemplate",permalink:"/docs/architecture/components/contracts/contracts/templates/AccessProofTemplate"},next:{title:"AgreementTemplate",permalink:"/docs/architecture/components/contracts/contracts/templates/AgreementTemplate"}},d={},p=[{value:"Functions",id:"functions",level:2},{value:"initialize",id:"initialize",level:3},{value:"Parameters:",id:"parameters",level:4}],m={toc:p};function u(e){var t=e.components,n=(0,a.Z)(e,c);return(0,o.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Implementation of Access Agreement Template"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," Access template is use case specific template.\n Anyone (consumer/provider/publisher) can use this template in order\n to setup an on-chain SEA. The template is a composite of three basic\n conditions. Once the agreement is created, the consumer will lock an amount\n of tokens (as listed in the DID document - off-chain metadata) to the \n the lock reward contract which in turn will fire an event. ON the other hand \n the provider is listening to all the emitted events, the provider \n will catch the event and grant permissions to the consumer through \n secret store contract, the consumer now is able to download the data set\n by asking the off-chain component of secret store to decrypt the DID and \n encrypt it using the consumer's public key. Then the secret store will \n provide an on-chain proof that the consumer had access to the data set.\n Finally, the provider can call the escrow reward condition in order \n to release the payment. Every condition has a time window (time lock and \n time out). This implies that if the provider didn't grant the access to \n the consumer through secret store within this time window, the consumer \n can ask for refund.\n")),(0,o.kt)("h2",{id:"functions"},"Functions"),(0,o.kt)("h3",{id:"initialize"},"initialize"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-solidity"},"  function initialize(\n    address _owner,\n    address _agreementStoreManagerAddress,\n    address _didRegistryAddress,\n    address _accessConditionAddress,\n    address _lockConditionAddress,\n    address payable _escrowConditionAddress\n  ) external\n")),(0,o.kt)("p",null,"initialize init the\ncontract with the following parameters."),(0,o.kt)("p",null,"this function is called only once during the contract\ninitialization. It initializes the ownable feature, and\nset push the required condition types including\naccess , lock payment and escrow payment conditions."),(0,o.kt)("h4",{id:"parameters"},"Parameters:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"_owner")),(0,o.kt)("td",{parentName:"tr",align:"left"},"address"),(0,o.kt)("td",{parentName:"tr",align:"left"},"contract's owner account address")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"_agreementStoreManagerAddress")),(0,o.kt)("td",{parentName:"tr",align:"left"},"address"),(0,o.kt)("td",{parentName:"tr",align:"left"},"agreement store manager contract address")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"_didRegistryAddress")),(0,o.kt)("td",{parentName:"tr",align:"left"},"address"),(0,o.kt)("td",{parentName:"tr",align:"left"},"DID registry contract address")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"_accessConditionAddress")),(0,o.kt)("td",{parentName:"tr",align:"left"},"address"),(0,o.kt)("td",{parentName:"tr",align:"left"},"access condition address")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"_lockConditionAddress")),(0,o.kt)("td",{parentName:"tr",align:"left"},"address"),(0,o.kt)("td",{parentName:"tr",align:"left"},"lock reward condition contract address")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"_escrowConditionAddress")),(0,o.kt)("td",{parentName:"tr",align:"left"},"address payable"),(0,o.kt)("td",{parentName:"tr",align:"left"},"escrow reward contract address")))))}u.isMDXComponent=!0}}]);