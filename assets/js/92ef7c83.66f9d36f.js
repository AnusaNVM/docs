"use strict";(self.webpackChunknvm_docs=self.webpackChunknvm_docs||[]).push([[890],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,h=d["".concat(l,".").concat(u)]||d[u]||m[u]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6402:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return m}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],s={sidebar_position:2,description:"Building a DApp using Nevermined frameworks"},l="How to build a React application integrated with Nevermined",p={unversionedId:"tutorials/running-local",id:"tutorials/running-local",title:"How to build a React application integrated with Nevermined",description:"Building a DApp using Nevermined frameworks",source:"@site/docs/tutorials/running-local.md",sourceDirName:"tutorials",slug:"/tutorials/running-local",permalink:"/docs/tutorials/running-local",draft:!1,editUrl:"https://github.com/nevermined-io/nvm-docs/tree/main/docs/tutorials/running-local.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,description:"Building a DApp using Nevermined frameworks"},sidebar:"tutorialSidebar",previous:{title:"Index",permalink:"/docs/tutorials/"},next:{title:"Running Nevermined in your local environment",permalink:"/docs/tutorials/running-locally"}},c={},m=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Let&#39;s go!!",id:"lets-go",level:2},{value:"Setup the React app",id:"setup-the-react-app",level:3},{value:"Create your Nevermined dApp",id:"create-your-nevermined-dapp",level:3},{value:"Login with Metamask",id:"login-with-metamask",level:3}],d={toc:m};function u(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"how-to-build-a-react-application-integrated-with-nevermined"},"How to build a React application integrated with Nevermined"),(0,i.kt)("p",null,"The idea of this tutorial is give a quick go through about using the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nevermined-io/components-catalog"},"Nevermined Catalog")," of React components to support the development of dApps using the Nevermined environment. Nevermined Catalog is a library that provides some React components to make it easier the integration with Nevermined technologies. You can find more info in the ",(0,i.kt)("a",{parentName:"p",href:"https://nvm-docs.nevermined.io/docs/architecture/components/catalog/getting-started/"},"documentation"),". "),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"The tutorial assumes your familiarity with blockchain, and general programming."),(0,i.kt)("h2",{id:"lets-go"},"Let's go!!"),(0,i.kt)("p",null,"Instructions for following along locally using your preferred text editor."),(0,i.kt)("h3",{id:"setup-the-react-app"},"Setup the React app"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Make sure you have a recent version of ",(0,i.kt)("a",{parentName:"li",href:"https://nodejs.org/en/"},"Node.js")," installed."),(0,i.kt)("li",{parentName:"ol"},"Follow the ",(0,i.kt)("a",{parentName:"li",href:"https://reactjs.org/docs/create-a-new-react-app.html#create-react-app"},"installation instructions for Create React App")," to make a new project. Or simply run ",(0,i.kt)("inlineCode",{parentName:"li"},"npx create-react-app my-nevermined-app --template typescript"),"."),(0,i.kt)("li",{parentName:"ol"},"Move to the my-nevermined-app directory ",(0,i.kt)("inlineCode",{parentName:"li"},"cd my-nevermined-app"),"."),(0,i.kt)("li",{parentName:"ol"},"Run ",(0,i.kt)("inlineCode",{parentName:"li"},"yarn add @nevermined-io/components-catalog")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"npm install --save @nevermined-io/components-catalog")," depending of your favourite package manager."),(0,i.kt)("li",{parentName:"ol"},"Run ",(0,i.kt)("inlineCode",{parentName:"li"},"yarn run start")," and open http://localhost:3000 and you will see the progress.")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/3496824/179922422-82411749-0c62-4a2b-8969-cbd35611ffa9.png",alt:"image"}),"\n",(0,i.kt)("em",{parentName:"p"},"Screenshot of the current application status.")),(0,i.kt)("h3",{id:"create-your-nevermined-dapp"},"Create your Nevermined dApp"),(0,i.kt)("p",null,"Once the react app is running and you have your catalog dependency, the next step will be to setup the configuration:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Donwload ",(0,i.kt)("a",{parentName:"li",href:"http://artifacts-nevermined-rocks.s3.amazonaws.com/80001/public/contracts_v2.0.0.tar.gz"},"Nevermined abi")," and store them in a folder named contracts in the public folder. These abis are the interface to iteract with Nevermined contracts deployed on the blockchain. Visit ",(0,i.kt)("a",{parentName:"li",href:"https://docs.soliditylang.org/en/develop/abi-spec.html"},"ABI specification")," to learn more about."),(0,i.kt)("li",{parentName:"ol"},"Create a ",(0,i.kt)("inlineCode",{parentName:"li"},"config.ts")," file and provide the Nevermined config as follow:")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"For the ",(0,i.kt)("inlineCode",{parentName:"p"},"REACT_APP_NODE_URI")," you can connect to a ",(0,i.kt)("a",{parentName:"p",href:"https://www.quicknode.com/"},"QuickNode")," or ",(0,i.kt)("a",{parentName:"p",href:"https://infura.io/"},"Infura")," puclic Node. Both services allow to connect your dApp to different blockchain networks. You will need to connect to iteract with Nevermined contracts."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"import { Config } from '@nevermined-io/nevermined-sdk-js';\nimport Web3 from 'web3';\n\n// URL where run the app\nexport const serviceUri = process.env.REACT_APP_SERVICE_URI || 'http://localhost:3445';\n// Ethereum address own by the gateway.\nexport const gatewayAddress = process.env.REACT_APP_GATEWAY_ADDRESS || '0xB82dc620BB4dE6712376055a5cfc0DF11112D442';\n// Gateway service\nexport const gatewayUri = process.env.REACT_APP_GATEWAY_URI || 'https://gateway.mumbai.public.nevermined.rocks/';\n// Fauce uri to get some tokens.\nexport const faucetUri = process.env.REACT_APPREACT_APP_FAUCET_URI_FAUCET_URI || 'https://faucet.mumbai.public.nevermined.rocks';\n// Blockchain node\nexport const nodeUri = process.env.REACT_APP_NODE_URI || 'https://bold-little-glitter.matic-testnet.discover.quiknode.pro/';\n// Chain id of your network\nexport const acceptedChainId = process.env.REACT_APP_ACCEPTED_CHAIN_ID || '80001'; // for Mumbai\n//URL where run the root of the app is. Important to find public folder with abis.\nexport const rootUri = process.env.REACT_APP_ROOT_URI || 'http://localhost:3445';\n// Marketplace API uri to store metadata.\nexport const marketplaceUri = process.env.REACT_APP_MARKETPLACE_URI || 'https://marketplace-api.mumbai.public.nevermined.rocks';\n\nexport const appConfig: Config = {\n  //@ts-ignore\n  web3Provider: new Web3(window.ethereum),\n  nodeUri,\n  gatewayUri,\n  faucetUri,\n  verbose: true,\n  gatewayAddress,\n  secretStoreUri: '',\n  graphHttpUri: '',\n  marketplaceAuthToken: '',\n  marketplaceUri,\n  artifactsFolder: `${rootUri}/contracts`\n};\n\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Go to ",(0,i.kt)("inlineCode",{parentName:"li"},"index.tsx")," and add the ",(0,i.kt)("inlineCode",{parentName:"li"},"NeverminedProvider"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport Catalog from '@nevermined-io/components-catalog';\nimport { appConfig } from './config';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <Catalog.NeverminedProvider config={appConfig}>\n      <App />\n    </Catalog.NeverminedProvider>\n  </React.StrictMode>\n);\n\nreportWebVitals();\n")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"After that you will be able to iteract with the Nevermined ecosystem. List did assets deployed updating your ",(0,i.kt)("inlineCode",{parentName:"li"},"App.tsx"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import Catalog from \'@nevermined-io/components-catalog\'\nimport React, { useEffect, useState } from \'react\'\n\nfunction App() {\n\n  const query = {\n    offset: 150,\n    page: 1,\n    query: {},\n    sort: {\n      created: \'desc\'\n    }\n  };\n\n  const MultipleAssets = () => {\n    const { isLoading: isLoadingAssets, result } = Catalog.useAssets(query)\n    const [dids, setDids] = useState<string[]>()\n\n    useEffect(() => {\n      setDids(result?.results?.map(asset => asset.id))\n    }, [result])\n\n    const [filterQuery, setQuery] = useState("")\n\n    function filterItems(query: string) {\n       setQuery(query)\n       setDids(result?.results?.map(asset => asset.id)?.filter(item => item.includes(query)))\n     }\n\n    return (\n      <>\n        <input\n          type="search"\n          name="search-form"\n          id="search-form"\n          className="search-input"\n          placeholder="Search for..."\n          value={filterQuery}\n          onChange={(e) => filterItems(e.target.value)}\n        />\n        <div>Assets: </div>\n        <div>\n          <ul>{!isLoadingAssets ? dids?.map(asset => <li key={asset}>{asset}</li>) : "Loading assets..."}</ul>\n        </div>\n      </>\n    )\n}\n  return (\n    <div className="App">\n      <header className="App-header">\n        <MultipleAssets />\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n')),(0,i.kt)("p",null,"Visit the code ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nevermined-io/tutorials/tree/main/catalog/001-Create%20Nevermined%20dApp"},"here"),"."),(0,i.kt)("h3",{id:"login-with-metamask"},"Login with Metamask"),(0,i.kt)("p",null,"After see how it is possible list some data coming from the blockchain let's see how you can login with your Nevermined dApp using our catalog integration with Metamask. "),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Metamask is a popular cryptowallet that is easy to integrate with a plugin in your browser. Visit the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.metamask.io/guide/#why-metamask"},"documentation")," to learn more and ",(0,i.kt)("a",{parentName:"p",href:"https://metamask.io/"},"download")," it for your favourite browser."))),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"As before, add the WalletProvider in ",(0,i.kt)("inlineCode",{parentName:"li"},"index.tsx"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"import ChainConfig from './ChainConfig';\n\n...\n      <Catalog.WalletProvider nodeUri={appConfig.nodeUri!} correctNetworkId='0x13881' chainConfig={ChainConfig}>\n        <App />\n      </Catalog.WalletProvider>\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Copy and paste this in ",(0,i.kt)("inlineCode",{parentName:"li"},"ChainConfig.ts")," in your ",(0,i.kt)("inlineCode",{parentName:"li"},"src")," folder. It contains blockchain networks information:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"import { zeroX } from '@nevermined-io/nevermined-sdk-js/dist/node/utils'\n\nconst spreeChainId = zeroX((1337).toString(16))\nconst polygonLocalnetChainId = zeroX((8997).toString(16))\nconst mumbaiChainId = zeroX((80001).toString(16))\nconst mainnetChainId = zeroX((137).toString(16))\n\nconst ChainConfig = {\n  development: {\n    chainId: spreeChainId,\n    chainName: 'Localhost development',\n    nativeCurrency: {\n      name: 'Ethereum',\n      symbol: 'ETH',\n      decimals: 18\n    },\n    rpcUrls: ['http://localhost:8545'],\n    blockExplorerUrls: [''],\n    iconUrls: ['https://s2.coinmarketcap.com/static/img/coins/64x64/3890.png']\n  },\n  mumbai: {\n    chainId: mumbaiChainId,\n    chainName: 'Polygon Testnet Mumbai',\n    nativeCurrency: {\n      name: 'Matic',\n      symbol: 'MATIC',\n      decimals: 18\n    },\n    rpcUrls: [\n      'https://matic-mumbai.chainstacklabs.com',\n      'https://rpc-endpoints.superfluid.dev/mumbai'\n    ],\n    blockExplorerUrls: ['https://mumbai.polygonscan.com/'],\n    iconUrls: ['https://s2.coinmarketcap.com/static/img/coins/64x64/3890.png']\n  },\n  mainnet: {\n    chainId: mainnetChainId,\n    chainName: 'Polygon Mainnet',\n    nativeCurrency: {\n      name: 'Matic',\n      symbol: 'MATIC',\n      decimals: 18\n    },\n    rpcUrls: ['https://polygon-rpc.com'],\n    blockExplorerUrls: ['https://polygonscan.com/'],\n    iconUrls: ['https://s2.coinmarketcap.com/static/img/coins/64x64/3890.png']\n  },\n  returnConfig: (chainIdHex: string) => {\n    if (chainIdHex === spreeChainId || chainIdHex === polygonLocalnetChainId) {\n      return ChainConfig.development\n    }\n    if (chainIdHex === mumbaiChainId) {\n      return ChainConfig.mumbai\n    }\n    if (chainIdHex === mainnetChainId) {\n      return ChainConfig.mainnet\n    }\n    return ChainConfig.development\n  }\n}\n\nexport default ChainConfig\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Modify ",(0,i.kt)("inlineCode",{parentName:"li"},"App.tsx")," to create a login button.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import Catalog from \'@nevermined-io/components-catalog\'\nimport React, { useEffect, useState } from \'react\'\n\nfunction App() {\n  const { loginMetamask, walletAddress, logout, checkIsLogged } = Catalog.useWallet();\n  \n  return (\n    <div className="App">\n      <header className="App-header">\n             {!walletAddress ? <button onClick={loginMetamask}>Login</button> : <button onClick={logout}>logout</button>}\n             {walletAddress ? \n               <>\n                   <div className="nav-item">{walletAddress}</div>\n               </>\n              : <></>\n             }\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n')),(0,i.kt)("p",null,"Visit the code ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nevermined-io/tutorials/tree/main/catalog/002-Login%20with%20Metamask"},"here"),"."),(0,i.kt)("p",null,"You can find a full list of examples in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nevermined-io/tutorials/tree/main/catalog"},"github"),"."))}u.isMDXComponent=!0}}]);